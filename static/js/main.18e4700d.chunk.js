(this["webpackJsonplittle-sis-api"]=this["webpackJsonplittle-sis-api"]||[]).push([[0],{12:function(t,e,a){},246:function(t,e,a){"use strict";a.r(e);var i=a(0),s=a.n(i),n=a(35),r=a.n(n),d=(a(88),a(12),a(80)),l=[188,13];class o extends i.Component{constructor(t){super(t),this.state={tags:[{id:"trump",text:"Trump"}],suggestions:[{id:"earth",text:"Earth"},{id:"portrait",text:"Portrait"},{id:"war",text:"War"},{id:"mountain",text:"Mountain"},{id:"tree",text:"Tree"},{id:"lake",text:"Lake"},{id:"princess",text:"Princess"},{id:"sky",text:"Sky"},{id:"river",text:"River"},{id:"dog",text:"Dog"},{id:"wolf",text:"Wolf"},{id:"forest",text:"Forest"},{id:"music",text:"Music"},{id:"sunset",text:"Sunset"},{id:"king",text:"King"},{id:"battle",text:"Battle"},{id:"pond",text:"Pond"},{id:"flower",text:"Flower"},{id:"god",text:"God"},{id:"farm",text:"Farm"},{id:"horse",text:"Horse"},{id:"figure",text:"Figure"},{id:"life",text:"Life"},{id:"landscape",text:"Landscape"},{id:"bridge",text:"Bridge"},{id:"water",text:"Water"},{id:"day",text:"Day"},{id:"man",text:"Man"},{id:"woman",text:"Woman"},{id:"people",text:"People"},{id:"family",text:"Family"},{id:"school",text:"School"},{id:"country",text:"Country"},{id:"hand",text:"Hand"},{id:"night",text:"Night"},{id:"home",text:"Home"},{id:"mother",text:"Mother"},{id:"story",text:"Story"},{id:"book",text:"Book"},{id:"house",text:"House"},{id:"father",text:"Father"},{id:"game",text:"Game"},{id:"city",text:"City"},{id:"body",text:"Body"},{id:"face",text:"Face"},{id:"party",text:"Party"},{id:"morning",text:"Morning"},{id:"girl",text:"Girl"},{id:"boy",text:"Boy"},{id:"sea",text:"Sea"},{id:"jesus",text:"Jesus"},{id:"view",text:"View"},{id:"abstract",text:"Abstract"},{id:"beach",text:"Beach"},{id:"nude",text:"Nude"},{id:"sand",text:"Sand"},{id:"moon",text:"Moon"},{id:"autumn",text:"Autumn"},{id:"spring",text:"Spring"},{id:"summer",text:"Summer"},{id:"winter",text:"Winter"},{id:"bird",text:"Bird"},{id:"festival",text:"Festival"},{id:"garden",text:"Garden"},{id:"son",text:"Son"},{id:"daughter",text:"Daughter"},{id:"dance",text:"Dance"},{id:"roman",text:"Roman"},{id:"warrior",text:"Warrior"},{id:"statue",text:"Statue"},{id:"dream",text:"Dream"},{id:"fruit",text:"Fruit"},{id:"wood",text:"Wood"},{id:"child",text:"Child"},{id:"christ",text:"Christ"},{id:"cloud",text:"Cloud"},{id:"wave",text:"Wave"},{id:"angel",text:"Angel"},{id:"scene",text:"Scene"},{id:"steet",text:"Street"},{id:"boat",text:"Boat"},{id:"ship",text:"Ship"},{id:"window",text:"Window"},{id:"balcony",text:"Balcony"},{id:"lady",text:"Lady"},{id:"saint",text:"Saint"},{id:"church",text:"Church"},{id:"ink",text:"Ink"},{id:"oil",text:"Oil"},{id:"canvas",text:"Canvas"},{id:"mourning",text:"Mourning"},{id:"panel",text:"Panel"},{id:"scroll",text:"Scroll"},{id:"rock",text:"Rock"},{id:"century",text:"Century"},{id:"light",text:"Light"},{id:"fire",text:"Fire"},{id:"magic",text:"Magic"},{id:"gold",text:"Gold"},{id:"snow",text:"Snow"},{id:"stream",text:"Stream"},{id:"silk",text:"Silk"},{id:"paint",text:"Paint"},{id:"black",text:"Black"},{id:"white",text:"White"},{id:"dragon",text:"Dragon"},{id:"wine",text:"Wine"},{id:"lion",text:"Lion"},{id:"tiger",text:"Tiger"},{id:"bear",text:"Bear"},{id:"cross",text:"Cross"},{id:"cat",text:"Cat"},{id:"wild",text:"Wild"},{id:"wind",text:"Wind"},{id:"wedding",text:"Wedding"},{id:"friend",text:"Friend"},{id:"prince",text:"Prince"},{id:"death",text:"Death"},{id:"foot",text:"Foot"},{id:"birth",text:"Birth"},{id:"devil",text:"Devil"},{id:"market",text:"Market"},{id:"brook",text:"Brook"},{id:"square",text:"Square"},{id:"fish",text:"Fish"},{id:"courtesan",text:"Courtesan"},{id:"tale",text:"Tale"},{id:"sketch",text:"Sketch"},{id:"grave",text:"Grave"},{id:"train",text:"Train"},{id:"miracle",text:"Miracle"},{id:"lamentation",text:"Lamentation"}]},this.handleDelete=this.handleDelete.bind(this),this.handleAddition=this.handleAddition.bind(this),this.handleDrag=this.handleDrag.bind(this)}setTagList(){return Array.prototype.map.call(this.state.tags,t=>t.text).toString()}componentDidMount(){document.querySelector(".ReactTags__tagInputField").insertAdjacentHTML("afterend",'<span class="bottom line"></span><span class="right line"></span><span class="top line"></span><span class="left line"></span>')}handleDelete(t){var e=this.state.tags;this.setState({tags:e.filter((e,a)=>a!==t)},()=>{this.props.update(this.setTagList())})}handleAddition(t){this.setState(e=>({tags:[...e.tags,t]}),()=>{this.props.update(this.setTagList())})}handleDrag(t,e,a){var i=[...this.state.tags].slice();i.splice(e,1),i.splice(a,0,t),this.setState({tags:i})}render(){var t=this.state,e=t.tags,a=t.suggestions;return s.a.createElement("div",null,s.a.createElement("div",{className:"search"},s.a.createElement(d.WithContext,{tags:e,suggestions:a,handleDelete:this.handleDelete,handleAddition:this.handleAddition,handleDrag:this.handleDrag,delimiters:l,onChange:this.handleAddition,autofocus:!1})))}}var c=a(82);function h(t){this.setState(e=>({page:e.page+t}))}"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/ls-api-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_WIKI_USER);class m extends i.Component{constructor(t){super(t),this.state={page:1},this.geonames={},this.meta={},this.paginate=h.bind(this)}componentDidUpdate(t,e){this.props.city!==t.city&&(this.setState({page:0}),this.getWikiData(this.props.city)),this.state.page!==e.page&&(console.log("api call from paging"),this.getWikiData(this.props.city))}getWikiData(t){var e=this.state.page;console.log("Page api call: ".concat(e)),fetch("https://littlesis.org/api/entities/".concat(t,"/relationships?page=").concat(e),{method:"GET"}).then(t=>t.json()).then(t=>{this.geonames=t.data,this.meta=t.meta,this.setState({})})}pageClick(t){console.log("pageclick p: ".concat(t)),this.paginate(t)}componentDidMount(){this.getWikiData(this.props.city)}render(){if(this.geonames[this.state.page]){var t,e=this.geonames,a=[],i=Object(c.a)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value,r=n.attributes.description;a.push(s.a.createElement("li",{key:n.id},r))}}catch(d){i.e(d)}finally{i.f()}return s.a.createElement("div",{className:"map-wiki flx-ctr wrap"},s.a.createElement("div",{className:"wiki"},s.a.createElement("div",{className:"wiki__results"},s.a.createElement("ul",null,a)),s.a.createElement("div",{className:"page"},this.state.page," of ",this.meta.pageCount," ",s.a.createElement("br",null),s.a.createElement("button",{className:"prev",onClick:()=>this.pageClick(-1),disabled:0===this.state.page},"previous")," |",s.a.createElement("button",{className:"next",onClick:()=>this.pageClick(1),disabled:this.state.page===this.geonames.length-1},"next"))),s.a.createElement("div",{className:"map"}))}return s.a.createElement("div",{className:"map-wiki flx-ctr wrap"},s.a.createElement("div",{className:"wiki"},s.a.createElement("div",null,s.a.createElement("svg",{className:"loading",viewBox:"25 25 50 50"},s.a.createElement("circle",{cx:"50",cy:"50",r:"20"})))))}}class p extends i.Component{constructor(t){super(t),this.state={id:15108,page:1,returnError:!1},this.data={},this.paginate=h.bind(this),this.setCity=this.setCity.bind(this)}componentDidMount(){this.fetchSearchData()}componentDidUpdate(t){this.props.term!==t.term&&this.setState({page:0},this.fetchSearchData())}getCssValuePrefix(){for(var t="",e=["-o-","-ms-","-moz-","-webkit-"],a=document.createElement("div"),i=0;i<e.length;i++)a.style.background="".concat(e[i],"linear-gradient(#000000, #ffffff)"),a.style.background&&(t=e[i]);return a=null,this.setStyle(t)}setStyle(t){for(var e=this.data[this.state.page].colors,a="",i=e.length;i--;)a+=e[i].color,a+=0===i?")":", ";document.body.style.background="radial-gradient(circle at bottom right, ".concat(a)}objToQueryString(t){var e=[];for(var a in t)e.push(encodeURIComponent(t[a]));return e.join("&")}queryString(){return this.objToQueryString({term:this.props.term})}fetchSearchData(){console.log("".concat(this.queryString())),fetch("https://littlesis.org/api/entities/search?q=".concat(this.queryString()),{method:"GET"}).then(t=>t.json()).then(t=>{this.data=t.data,0===this.data.length?this.setState({returnError:!0}):this.setState({page:0})}).catch(t=>{this.setState({returnError:!0}),console.log(t)})}setCity(){var t=this.data[this.state.page].people[0].birthplace;if(t)return t.length>23?t.split(" ").pop():t;if(this.data[this.state.page].culture)return this.data[this.state.page].culture;var e=this.data[this.state.page].division;return e.substr(0,e.indexOf(" "))}render(){if(this.data[this.state.page])return s.a.createElement("div",null,s.a.createElement("div",{className:"render-container"},s.a.createElement("div",{className:"painting flx-ctr"},s.a.createElement("div",{className:"painting__frame flx-ctr"},s.a.createElement("span",{className:"heading"}," ",this.data[this.state.page].attributes.name," ")," ",s.a.createElement("div",{className:"frame__cell left"})," ",s.a.createElement("div",{className:"frame__cell right"},s.a.createElement("div",{className:"painting__label"},s.a.createElement("span",{className:"label__title row"}," ","TITLEJPF:",this.data[this.state.page].title," ")," ",s.a.createElement("span",{className:"label__artist row"}," ",this.data[this.state.page].attributes.blurb," ")," ",s.a.createElement("span",{className:"label__dated row"}," ",this.data[this.state.page].attributes.summary," ")," ")," ",s.a.createElement("div",{className:"painting__paging page"}," ",this.state.page+1," of ",this.data.length," ",s.a.createElement("br",null),s.a.createElement("button",{className:"prev",onClick:()=>this.paginate(-1),disabled:0===this.state.page}," ","previous"," ")," ","|"," ",s.a.createElement("button",{className:"next",onClick:()=>this.paginate(1),disabled:this.state.page===this.data.length-1},"next"))," ")," ")," ")," ")," ",s.a.createElement(m,{city:this.data[this.state.page].attributes.id})," ");var t=this.state.returnError;return s.a.createElement("div",null,s.a.createElement("div",{className:"render-container"}," ",t?s.a.createElement("div",{className:"search-error"},"ERROR : ",this.props.term,"did not return any results"," "):s.a.createElement("div",{className:"painting flx-ctr"},s.a.createElement("div",null,s.a.createElement("svg",{className:"loading",viewBox:"25 25 50 50"},s.a.createElement("circle",{cx:"50",cy:"50",r:"20"}," ")," ")," ")," ")," ")," ")}}class g extends i.PureComponent{constructor(t){super(t),this.state={term:"Trump"},this.updateTerm=this.updateTerm.bind(this)}updateTerm(t){this.setState({term:t})}render(){return s.a.createElement("div",{id:"App",className:"App"},s.a.createElement(o,{update:this.updateTerm}),s.a.createElement(p,{term:this.state.term})," ")}}var x=g;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.unregister()})},83:function(t,e,a){t.exports=a(246)},88:function(t,e,a){}},[[83,1,2]]]);
//# sourceMappingURL=main.18e4700d.chunk.js.map