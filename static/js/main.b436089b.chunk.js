(this["webpackJsonplittle-sis-api"]=this["webpackJsonplittle-sis-api"]||[]).push([[0],{245:function(t,e,a){"use strict";a.r(e);var i=a(0),n=a.n(i),s=a(35),r=a.n(s);a(9),a(80);i.Component;function l(t){this.setState(e=>({page:e.page+t}))}class c extends i.Component{constructor(t){super(t),this.objToQueryString=t=>{var e=[];return Object.keys(t).forEach(a=>{t&&t.hasOwnProperty(a)&&e.push(encodeURIComponent(t[a]))}),e.join("&")},this.state={page:1,returnError:!1},this.data={},this.paginate=l.bind(this)}componentDidMount(){this.fetchSearchData()}componentDidUpdate(t){this.props.term!==t.term&&this.setState({page:0},this.fetchSearchData())}getCssValuePrefix(){for(var t="",e=["-o-","-ms-","-moz-","-webkit-"],a=document.createElement("div"),i=0;i<e.length;i+=1)a.style.background="".concat(e[i],"linear-gradient(#000000, #ffffff)"),a.style.background&&(t=e[i]);return a=null,this.setStyle(t)}queryString(){var t=this.props.term;return this.objToQueryString({term:t})}fetchSearchData(){fetch("https://littlesis.org/api/entities/search?q=".concat(this.queryString()),{method:"GET"}).then(t=>t.json()).then(t=>{if(this.data=t.data,0===this.data.length)return this.setState({returnError:!0});this.setState({page:0})}).catch(t=>{this.setState({returnError:!0}),console.log(t)})}render(){var t=this.state.page,e=this.props.setId;if(this.data[t])return n.a.createElement("div",null,n.a.createElement("div",{className:"render-container"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("h1",null," ",this.data[t].attributes.name," "))," ",n.a.createElement("div",null," ",this.data[t].attributes.blurb," "),n.a.createElement("div",null," ",this.data[t].attributes.summary," ")," ")," ",n.a.createElement("div",{className:"painting__paging page"}," ",t+1," of ",this.data.length," ",n.a.createElement("br",null),n.a.createElement("button",{type:"button",className:"prev",onClick:()=>{this.paginate(-1),e(this.data[t-1].id)},disabled:0===t}," ","previous"," ")," ","|"," ",n.a.createElement("button",{type:"button",className:"next",onClick:()=>{this.paginate(1),e(this.data[t+1].id)},disabled:t===this.data.length-1},"next"))," ")," ");var a=this.state,i=a.returnError,s=a.term;return n.a.createElement("div",null,n.a.createElement("div",{className:"render-container"}," ",i?n.a.createElement("div",{className:"search-error"},"ERROR : ",s,"did not return any results"," "):n.a.createElement("div",{className:"painting flx-ctr"},n.a.createElement("div",null,n.a.createElement("svg",{className:"loading",viewBox:"25 25 50 50"},n.a.createElement("circle",{cx:"50",cy:"50",r:"20"}," ")," ")," ")," ")," ")," ")}}var o=a(82);class d extends i.PureComponent{constructor(t){super(t),this.state={included:{}}}componentDidMount(){var t=this.props.id;this.getRelationData(t)}componentDidUpdate(t){var e=this.props.id;e!==t.id&&this.getRelationData(e)}getRelationData(t){fetch("https://littlesis.org/api/relationships/".concat(t),{method:"GET"}).then(t=>t.json()).then(t=>{this.setState({included:t.included[0]})})}render(){var t=this.state.included;return t.attributes?n.a.createElement("div",{className:"details"},n.a.createElement("h1",null,t.attributes.name),n.a.createElement("p",null,t.attributes.blurb),n.a.createElement("p",null,t.attributes.summary)):n.a.createElement("div",{className:"map-wiki flx-ctr wrap"},n.a.createElement("div",{className:"wiki"},n.a.createElement("div",null,n.a.createElement("svg",{className:"loading",viewBox:"25 25 50 50"},n.a.createElement("circle",{cx:"50",cy:"50",r:"20"})))))}}class m extends i.Component{constructor(t){super(t),this.state={data:{},page:1,relationId:1727566,entityId:12},this.meta={},this.paginate=l.bind(this)}componentDidMount(){var t=this.props.entityId;this.getRelationshipData(t)}componentDidUpdate(t,e){var a=this.props.entityId,i=this.state.page;a!==t.entityId&&(this.setState({page:1}),this.getRelationshipData(a)),i!==e.page&&this.getRelationshipData(a)}getRelationshipData(t){var e=this.state.page;fetch("https://littlesis.org/api/entities/".concat(t,"/relationships?page=").concat(e),{method:"GET"}).then(t=>t.json()).then(e=>{this.meta=e.meta,this.setState({data:e.data,relationId:e.data[0].attributes.id,entityId:t})})}myDetails(t){this.setState({relationId:t})}render(){var t=this,e=this.state,a=e.data,i=e.page,s=e.relationId,r=e.entityId;if(a[i]){var l,c=[],m=Object(o.a)(a);try{var h=function(){var e=l.value,a=e.attributes.description,i=r===e.attributes.entity1_id?e.attributes.entity2_id:e.attributes.entity1_id;c.push(n.a.createElement("li",{key:e.id},n.a.createElement("div",null,a),n.a.createElement("div",{className:"buttons"},n.a.createElement("button",{type:"button",onClick:()=>t.getRelationshipData(i)},"My Relations ",i),n.a.createElement("button",{className:"button__details",type:"button",onClick:()=>t.myDetails(e.id)},"My Details ",e.id))))};for(m.s();!(l=m.n()).done;)h()}catch(u){m.e(u)}finally{m.f()}return n.a.createElement("div",{className:"flx-ctr wrap"},n.a.createElement("div",{className:"relationships flx-hlf"},n.a.createElement("div",{className:"relationships__results"},n.a.createElement("ul",null,c)),n.a.createElement("div",{className:"page"},i," of ",this.meta.pageCount,n.a.createElement("br",null),n.a.createElement("button",{type:"button",className:"prev",onClick:()=>this.paginate(-1),disabled:1===i},"previous")," ","|",n.a.createElement("button",{type:"button",className:"next",onClick:()=>this.paginate(1),disabled:i===a.length-1},"next"))),n.a.createElement("div",{className:"details flx-hlf"},n.a.createElement(d,{id:s})))}return n.a.createElement("div",{className:"map-wiki flx-ctr wrap"},n.a.createElement("div",{className:"wiki"},n.a.createElement("div",null,n.a.createElement("svg",{className:"loading",viewBox:"25 25 50 50"},n.a.createElement("circle",{cx:"50",cy:"50",r:"20"})))))}}class h extends i.PureComponent{constructor(t){super(t),this.state={term:"Trump",id:15108},this.updateTerm=this.updateTerm.bind(this),this.setId=this.setId.bind(this)}updateTerm(t){this.setState({term:t})}setId(t){this.setState({id:t})}render(){var t=this.state,e=t.term,a=t.id;return n.a.createElement("div",{id:"App",className:"App"},n.a.createElement(c,{term:e,setId:this.setId}),n.a.createElement(m,{entityId:a})," ")}}var u=h;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(u,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.unregister()})},83:function(t,e,a){t.exports=a(245)},9:function(t,e,a){}},[[83,1,2]]]);
//# sourceMappingURL=main.b436089b.chunk.js.map